import{J as v,U as w,j as e,Q as N,t as C,S as k}from"./app-DRrHojaG.js";import{B as S}from"./button-BuJzaNID.js";import{C as o,a as i,b as c,c as l,F as _,d as $}from"./card-DOr82eaN.js";import{B as T}from"./badge-zR9X7Ung.js";import{A as P,S as D}from"./app-layout-jSz2uPLn.js";import{E as m,v as A,p as B,J as E,D as p}from"./jszip.min-8190tTrm.js";import{u as M}from"./useTranslation-DZairWB1.js";import{P as L}from"./plus-B7cQxdFq.js";import{C as u}from"./clock-hGiFnKnf.js";import{T as F}from"./trending-up-D7jwR5wG.js";import{D as U}from"./dollar-sign-QexKFNor.js";import{T as z}from"./trash-2-CIaX_W2K.js";import{P as H}from"./package-C4hIybyN.js";/* empty css            */import"./index-DDCA5pFv.js";import"./index-C8Gpbpq8.js";import"./app-logo-icon-B5qPAw4t.js";B.vfs=A.vfs;window.JSZip=E;m.use(p);m.use(p);function ae(){const{purchases:h,stats:n}=v().props,{t}=M(),x=[{title:t("purchases"),href:"/purchases"}],f=s=>{confirm(t("confirm-delete-purchase"))&&k.delete(`/purchases/${s}`,{onSuccess:()=>{}})},g=s=>{const a={pending:{variant:"outline",color:"text-yellow-600",icon:u},completed:{variant:"default",color:"text-green-600",icon:H},cancelled:{variant:"destructive",color:"text-red-600",icon:z}},r=a[s]||a.pending,y=r.icon;return e.jsxs(T,{variant:r.variant,className:"flex items-center gap-1",children:[e.jsx(y,{className:"h-3 w-3"}),t(s)]})},d=s=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(s),b=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),j=[{title:t("purchase-number"),data:"purchase_number",render:(s,a,r)=>a==="display"?`<div class="font-medium">${s}</div>`:s},{title:t("supplier"),data:"supplier_name",render:(s,a,r)=>a==="display"?`
                        <div class="space-y-1">
                            <div class="font-medium">${s}</div>
                            <div class="text-sm text-gray-500">${r.supplier_company||""}</div>
                        </div>
                    `:s},{title:t("date"),data:"purchase_date",render:(s,a,r)=>a==="display"?b(s):s},{title:t("total"),data:"total",render:(s,a,r)=>a==="display"?`<div class="font-medium">${d(s)}</div>`:s},{title:t("status"),data:"status",render:(s,a,r)=>a==="display"?(g(s),`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s==="completed"?"bg-green-100 text-green-800":s==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}">${s.charAt(0).toUpperCase()+s.slice(1)}</span>`):s},{title:t("actions"),data:null,orderable:!1,render:(s,a,r)=>a==="display"?`
                        <div class="flex items-center gap-2">
                            <a href="/purchases/${r.id}" class="inline-flex items-center justify-center h-8 w-8 rounded-md border border-gray-200 bg-white text-gray-700 hover:bg-gray-50">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                            </a>
                            <a href="/purchases/${r.id}/edit" class="inline-flex items-center justify-center h-8 w-8 rounded-md border border-gray-200 bg-white text-gray-700 hover:bg-gray-50">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </a>
                            <button onclick="deletePurchase(${r.id})" class="inline-flex items-center justify-center h-8 w-8 rounded-md border border-gray-200 bg-white text-red-600 hover:bg-red-50">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    `:""}];return w.useEffect(()=>(window.deletePurchase=f,()=>{delete window.deletePurchase}),[]),e.jsxs(P,{breadcrumbs:x,children:[e.jsx(N,{title:"Purchases"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 arabic-font",children:t("purchases")}),e.jsx("p",{className:"text-gray-600 mt-1 arabic-font",children:t("manage-purchases-description")})]}),e.jsx(C,{href:"/purchases/create",children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"arabic-font",children:t("create-purchase")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(o,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium arabic-font",children:t("total-purchases")}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total}),e.jsxs("p",{className:"text-xs text-muted-foreground arabic-font",children:[n.today," ",t("today")]})]})]}),e.jsxs(o,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium arabic-font",children:t("pending-orders")}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.pending}),e.jsx("p",{className:"text-xs text-muted-foreground arabic-font",children:t("awaiting-processing")})]})]}),e.jsxs(o,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium arabic-font",children:t("monthly-total")}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(n.monthly_total)}),e.jsxs("p",{className:"text-xs text-muted-foreground arabic-font",children:[n.this_month," ",t("purchases-this-month")]})]})]}),e.jsxs(o,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium arabic-font",children:t("all-time-total")}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(n.total_amount)}),e.jsx("p",{className:"text-xs text-muted-foreground arabic-font",children:t("total-purchase-value")})]})]})]}),e.jsxs(o,{children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2 arabic-font",children:[e.jsx(_,{className:"h-5 w-5"}),t("purchase-orders")]}),e.jsx($,{className:"arabic-font",children:t("view-manage-purchase-orders")})]}),e.jsx(l,{children:e.jsx("div",{className:"overflow-hidden",children:e.jsx(m,{data:h,columns:j,options:{responsive:!0,pageLength:10,ordering:!0,searching:!0,dom:"Bfrtip",buttons:[{extend:"copy",text:t("copy"),className:"btn btn-sm btn-outline-secondary me-2"},{extend:"csv",text:"CSV",className:"btn btn-sm btn-outline-secondary me-2"},{extend:"excel",text:"Excel",className:"btn btn-sm btn-outline-secondary me-2"},{extend:"pdf",text:"PDF",className:"btn btn-sm btn-outline-secondary me-2"},{extend:"print",text:t("print"),className:"btn btn-sm btn-outline-secondary"}],language:{search:"",searchPlaceholder:t("search-purchases"),lengthMenu:`_MENU_ ${t("purchases-per-page")}`,info:`${t("showing")} _START_ ${t("to")} _END_ ${t("of")} _TOTAL_ ${t("purchases")}`,infoEmpty:t("no-purchases-found"),infoFiltered:`(${t("filtered-from-total")})`,zeroRecords:t("no-matching-purchases"),emptyTable:t("no-purchases-available")},initComplete:function(s,a){const r=document.querySelector(".dataTables_filter input");r&&(r.setAttribute("class","form-control form-control-sm"),r.setAttribute("placeholder","Search purchases..."))}},className:"display responsive nowrap w-100"})})})]})]})]})}export{ae as default};
