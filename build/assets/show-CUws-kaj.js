import{J as _,j as s,Q as A,t as u,S as N}from"./app-DRrHojaG.js";import{a as v,B as t}from"./button-BuJzaNID.js";import{C as l,a as i,b as n,F as S,c as d}from"./card-DOr82eaN.js";import{B as k}from"./badge-zR9X7Ung.js";import{S as h}from"./separator-C-4gOJsk.js";import{A as I}from"./app-layout-jSz2uPLn.js";import{u as D}from"./useTranslation-DZairWB1.js";import{P as y,C as T}from"./printer-Bim3U1_k.js";import{S as f,P as B}from"./square-pen-DCU4Wsyc.js";import{T as $}from"./trash-2-CIaX_W2K.js";import{C as F}from"./calendar-BkU8oDa1.js";import{D as E}from"./dollar-sign-QexKFNor.js";import{B as L}from"./building-BQtN6JYq.js";import{M}from"./mail-DjoJPXlX.js";import{M as Q,C as q}from"./map-pin-CWlUosCe.js";import{P as H}from"./package-C4hIybyN.js";import{C as O}from"./circle-check-big-DJ0PYvcw.js";import{C as R}from"./clock-hGiFnKnf.js";/* empty css            */import"./index-C8Gpbpq8.js";import"./index-DDCA5pFv.js";import"./app-logo-icon-B5qPAw4t.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],J=v("CircleAlert",U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],g=v("Hash",V);function us(){const{purchase:e}=_().props,{t:x}=D(),o=(a=>{if(!a)return[];if(typeof a=="string")try{return JSON.parse(a)}catch(c){return console.error("Failed to parse items:",c),[]}return Array.isArray(a)?a:[]})(e.items),w=[{title:x("purchases"),href:"/purchases"},{title:e.purchase_number||"Purchase",href:`/purchases/${e.id}`}],b=()=>{confirm(x("confirm-delete-purchase"))&&N.delete(`/purchases/${e.id}`,{onSuccess:()=>{N.visit("/purchases")}})},C=a=>{const c={pending:{variant:"outline",color:"text-yellow-600 bg-yellow-50 border-yellow-200",icon:R},completed:{variant:"default",color:"text-green-600 bg-green-50 border-green-200",icon:O},cancelled:{variant:"destructive",color:"text-red-600 bg-red-50 border-red-200",icon:q}},j=c[a]||c.pending,P=j.icon;return s.jsxs(k,{className:`flex items-center gap-1 ${j.color}`,children:[s.jsx(P,{className:"h-3 w-3"}),x(a)]})},r=a=>a==null||isNaN(a)?new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(0):new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(a),m=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid Date"}},p=()=>{window.print()};return s.jsxs(I,{breadcrumbs:w,children:[s.jsx(A,{title:`Purchase Order ${e.purchase_number||"N/A"}`}),s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 arabic-font",children:[x("purchase")," #",e.purchase_number||"N/A"]}),s.jsx("p",{className:"text-gray-600 mt-1 arabic-font",children:x("view-manage-purchase-details")})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(t,{variant:"outline",onClick:p,className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),"Print"]}),s.jsx(u,{href:`/purchases/${e.id}/edit`,children:s.jsxs(t,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(f,{className:"h-4 w-4"}),"Edit"]})}),s.jsxs(t,{variant:"destructive",onClick:b,className:"flex items-center gap-2",children:[s.jsx($,{className:"h-4 w-4"}),"Delete"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(l,{children:[s.jsx(i,{children:s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(S,{className:"h-5 w-5"}),"Purchase Order Information"]})}),s.jsx(d,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Purchase Number"}),s.jsx("p",{className:"font-medium",children:e.purchase_number||"N/A"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Purchase Date"}),s.jsx("p",{className:"font-medium",children:e.purchase_date?m(e.purchase_date):"N/A"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Purchase ID"}),s.jsxs("p",{className:"font-medium",children:["#",e.id]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("div",{className:"mt-1",children:C(e.status||"pending")})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),s.jsx("p",{className:"font-bold text-lg",children:r(e.total)})]})]})]})]})})]}),s.jsxs(l,{children:[s.jsx(i,{children:s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(L,{className:"h-5 w-5"}),"Supplier Information"]})}),s.jsx(d,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Supplier Name"}),s.jsx("p",{className:"font-medium",children:e.supplier_name||"N/A"})]}),e.supplier_company&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),s.jsx("p",{className:"font-medium",children:e.supplier_company})]}),e.supplier_phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium",children:e.supplier_phone})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[e.supplier_email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium",children:e.supplier_email})]})]}),e.supplier_address&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Q,{className:"h-4 w-4 text-gray-500 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),s.jsx("p",{className:"font-medium whitespace-pre-line",children:e.supplier_address})]})]})]})]})})]}),s.jsxs(l,{children:[s.jsx(i,{children:s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(H,{className:"h-5 w-5"}),"Purchase Items"]})}),s.jsxs(d,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-3 px-2",children:"Description"}),s.jsx("th",{className:"text-right py-3 px-2",children:"Quantity"}),s.jsx("th",{className:"text-right py-3 px-2",children:"Unit Price"}),s.jsx("th",{className:"text-right py-3 px-2",children:"Total"})]})}),s.jsx("tbody",{children:o.map((a,c)=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-3 px-2",children:s.jsx("div",{className:"font-medium",children:(a==null?void 0:a.description)||"N/A"})}),s.jsx("td",{className:"text-right py-3 px-2",children:(a==null?void 0:a.quantity)||0}),s.jsx("td",{className:"text-right py-3 px-2",children:r((a==null?void 0:a.unit_price)||0)}),s.jsx("td",{className:"text-right py-3 px-2 font-medium",children:r((a==null?void 0:a.total)||0)})]},c))})]})}),s.jsx(h,{className:"my-4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{className:"font-medium",children:r(e.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["VAT (",e.vat_rate||0,"%):"]}),s.jsx("span",{className:"font-medium",children:r(e.vat_amount)})]}),s.jsx(h,{}),s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:r(e.total)})]})]})]})]}),e.notes&&s.jsxs(l,{children:[s.jsx(i,{children:s.jsx(n,{children:"Additional Notes"})}),s.jsx(d,{children:s.jsx("p",{className:"whitespace-pre-line",children:e.notes})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(l,{children:[s.jsx(i,{children:s.jsx(n,{children:"Quick Actions"})}),s.jsxs(d,{className:"space-y-3",children:[s.jsx(u,{href:`/purchases/${e.id}/edit`,className:"block",children:s.jsxs(t,{variant:"outline",className:"w-full justify-start",children:[s.jsx(f,{className:"h-4 w-4 mr-2"}),"Edit Purchase"]})}),s.jsxs(t,{variant:"outline",className:"w-full justify-start",onClick:p,children:[s.jsx(y,{className:"h-4 w-4 mr-2"}),"Print Purchase"]}),s.jsxs(t,{variant:"outline",className:"w-full justify-start",onClick:()=>navigator.clipboard.writeText(window.location.href),children:[s.jsx(T,{className:"h-4 w-4 mr-2"}),"Copy Link"]})]})]}),s.jsxs(l,{children:[s.jsx(i,{children:s.jsx(n,{children:"Purchase Summary"})}),s.jsxs(d,{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:r(e.total)}),s.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"})]}),s.jsx(h,{}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Items:"}),s.jsx("span",{children:o.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Created:"}),s.jsx("span",{children:e.created_at?m(e.created_at):"N/A"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Updated:"}),s.jsx("span",{children:e.updated_at?m(e.updated_at):"N/A"})]})]})]})]})]})]})]})]})}export{us as default};
